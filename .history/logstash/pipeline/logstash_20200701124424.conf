input {
	redis {
		id => "RedisLog"
		batch_count => 1
		data_type => "list"
		key => "kg:basic:log"
		host => "106.14.144.15"
		port => 6379
		password => "1q2w3e4r@!"
		db => 6
		threads => "5"
		type => "kglog"
    }
	tcp {
		host => "106.14.144.15"
        port => 8010
        type => "tcplog"
    }
}

## Add your filters / logstash plugins configuration here

output {
	if[type] == "kglog" {
		elasticsearch {
			hosts => "elasticsearch:9200"
			user => "elastic"
			password => "changeme"
			index => "kg-log"
		}
	}
	if[type] == "tcplog" {
		elasticsearch {
			hosts => "elasticsearch:9200"
			user => "elastic"
			password => "changeme"
			protocol => "http"
			index => "tcplog"
			workers => 5
			template_overwrite => true
    	}
	}
	
}
